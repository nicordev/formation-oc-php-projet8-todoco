{% extends 'base.html.twig' %}

{% block header_title %}<h1>Modifier <strong>{{ user.username }}</strong></h1>{% endblock %}
{% block header_img %}{% endblock %}

{% block body %}
    <div class="row">
        {{ form_start(form, {'action' : path('user_edit', {'id' : user.id})}) }}
        {{ form_widget(form) }}

        <button type="submit" class="btn btn-success pull-right">Modifier</button>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block more_scripts %}
    <script>
        /**
         * Avoid the role selector to have more than one selected role if the user to edit is admin
         */
        function avoidMoreThanOneRole() {
            let adminRoleElement = document.querySelector('option[value="ROLE_ADMIN"]');

            if (adminRoleElement.selected) {
                let userRoleElement = document.querySelector('option[value="ROLE_USER"]');
                userRoleElement.removeAttribute("selected");
            }
        }

        avoidMoreThanOneRole();
    </script>
{% endblock %}